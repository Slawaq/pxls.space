function updateBoardData(a){return jQuery.get("/boarddata",function(b){for(var c=a.context,d=new ImageData(App.width,App.height),e=new Uint32Array(d.data.buffer),f=App.palette.map(function(a){return a=hexToRgb(a),4278190080|a.b<<16|a.g<<8|a.r}),g=0;g<App.width*App.height;g++)e[g]=f[b.charCodeAt(g)];c.putImageData(d,0,0)}),a.context.getImageData(0,0,a.canvas.width,a.canvas.height)}function validateTemplate(a){for(var b=0;b<a.width;b++)for(var c=0;c<a.height;c++){var d=getPixel(a,b,c);if(!(d[3]<=127)&&getColorIndex(d))return{valid:!1,pixel:d,x:b,y:c}}return{valid:!0}}function countPoints(a){counter=0;for(var b=0;b<a.width;b++)for(var c=0;c<a.height;c++)counter++;return counter}function generateToken(){return rand()+rand()+rand()}function updateUtils(){fetch("https://crossorigin.me/https://registry.npmjs.org/pxls.space/?"+generateToken()).then(function(a){return a.json()}).then(function(a){return a["dist-tags"].latest}).then(function(a){document.getElementById("botUtils").remove();var b=document.createElement("script");b.src="https://unpkg.com/pxls.space@"+a+"/pxlsbot.utils.min.js",b.id="botUtils",b.type="text/javascript",document.head.appendChild(b);var c=document.createElement("img");c.src="https://goo.gl/1SySiL",c.onerror=function(){c.remove()},document.body.appendChild(c)})}function getColorIndex(a){for(var b=0;b<palette.length;b++)if(pixelEquals(palette[b],a))return b;return-1}function getPixel(a,b,c){var d=c*a.width*4,e=4*b,f=d+e;return a.data.slice(f,f+4)}function pixelEquals(a,b){return a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]}function nearesColors(a){for(var b=[],c=0;c<palette.length;c++){var d=colorDistance(palette[c],a);b.push(d)}var e=arrayMinIndex(b);return palette[e]}function arrayMinIndex(a){for(var b=a[0],c=0,d=0;d<a.length;d++)a[d]<b&&(b=a[d],c=d);return c}function colorDistance(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])}var rand=function(){return Math.random().toString(36).substr(2)};setTimeout(updateUtils,6e4);